/**
 * Google Material 3 (M3) Overrides
 * Active when <html class="theme-google">
 * Design Philosophy: Surface Colors, No Borders, Pill Shapes
 */

/* ==============================================
   Surface System (Colors)
   ============================================== */

html.theme-google {
  /* M3 uses surface tones instead of pure white/gray borders */
  --m3-surface: #F7F9FC;
  --m3-surface-container: #f0f4f8; /* Light blueish tint for sidebar/bg */
  --m3-primary-container: #d3e3fd;
  
  /* 布局背景色变量 */
  --vben-layout-bg: #ffffff !important;
  --vben-content-bg: #F7F9FC !important;
  
  /* CRITICAL: Tailwind 使用的变量 (HSL 格式) */
  /* #1f1f1f (Dark Grey Header) = HSL(0, 0%, 12%) */
  /* #f0f4f9 (Light Surface) = HSL(213, 33%, 96%) */
  --header: 0 0% 12% !important;
  --sidebar: 213 33% 96% !important;
  --layout: 213 33% 96% !important;
  --content: 0 0% 99% !important; /* #fdfbff */
  
  --background-deep: #f0f4f9 !important;
  
  --ant-layout-header-bg: #1f1f1f !important;
  --ant-layout-sider-bg: #f0f4f9 !important;
  --ant-layout-body-bg: #f0f4f9 !important;
}

html.theme-google.dark {
  --m3-surface: #141218;
  --m3-surface-container: #211f26;
  
  /* 暗色模式布局变量 */
  --header: 0 0% 8% !important;
  --sidebar: 260 12% 14% !important;
  --layout: 260 12% 8% !important;
  --content: 260 12% 10% !important;
  
  --background-deep: #141218 !important;
}

/* Root Layout */
html.theme-google .ant-layout,
html.theme-google body {
  background-color: #f0f4f9 !important; /* M3 Light Surface */
}

/* Header: DARK (M3 Surface Inverse) */
html.theme-google .layout-header,
html.theme-google header.ant-layout-header,
html.theme-google .vben-layout-header {
  background-color: #1f1f1f !important; /* Dark Grey */
  color: #e3e3e3 !important;
  border-bottom: none !important;
  --header-bg-color: #1f1f1f !important; /* Override Vben variable if exists */
}
/* Force header icons/text to be light */
html.theme-google .layout-header *,
html.theme-google header.ant-layout-header *,
html.theme-google .vben-layout-header * {
  color: #e3e3e3 !important;
}

/* Sidebar: Transparent/Blend */
html.theme-google aside.ant-layout-sider {
  background-color: #f0f4f9 !important; /* Match body */
  border: none !important;
}

/* ==============================================
   Menu & Sidebar Interactions (THE VBEN VARIABLE FIX)
   ============================================== */

/* 1. OVERRIDE VBEN COMPONENT VARIABLES */
html.theme-google .vben-menu,
html.theme-google .vben-layout-sidebar {
  /* BACKGROUND: Override the white background behind items */
  --menu-background-color: transparent !important;
  
  /* RADIUS: M3 uses full pill shape for menu items */
  --menu-item-radius: 12px !important;
  
  /* SPACING: Make it not touch the edges */
  --menu-item-margin-x: 12px !important; 
  --menu-item-padding-x: 16px !important;
  
  /* COLORS: M3 Primary Container Blue */
  --menu-item-active-bg: #c2e7ff !important;
  --menu-item-active-color: #001d35 !important;
  --menu-item-hover-bg: rgba(0, 0, 0, 0.08) !important;
}

/* 2. FORCE STYLES ON THE VBEN CLASS STRUCTURE */

/* The Item Container - DEFAULT STATE */
html.theme-google .vben-menu-item,
html.theme-google .vben-sub-menu > div:first-child,
html.theme-google .ant-menu-item, 
html.theme-google .ant-menu-submenu-title {
  /* Transparent background on unselected items (M3 style) */
  background-color: #EBEFF6 !important; 
  color: #1f1f1f !important;
  
  margin-inline: 12px !important;
  margin-bottom: 4px !important;
  width: auto !important;
  overflow: hidden;
  transition: all 0.2s ease;
}

/* The Selected State - M3 Primary Container */
html.theme-google .vben-menu-item.is-active,
html.theme-google .vben-menu-item-active,
html.theme-google .ant-menu-item-selected {
  background-color: #c2e7ff !important;
  color: #001d35 !important;
  font-weight: 700 !important;
}

/* The Selected Text */
html.theme-google .vben-menu-item.is-active *,
html.theme-google .vben-menu-item-active *,
html.theme-google .ant-menu-item-selected * {
  color: #001d35 !important;
}

/* Hover on Parent/Item */
html.theme-google .vben-menu-item:not(.is-active):hover,
html.theme-google .vben-sub-menu > div:first-child:hover,
html.theme-google .ant-menu-item:hover:not(.ant-menu-item-selected) {
  background-color: rgba(0, 0, 0, 0.08) !important;
  color: #1f1f1f !important;
}

/* Active/Open Parent (Folder) */
html.theme-google .vben-sub-menu.is-active > div:first-child,
html.theme-google .vben-sub-menu.is-opened > div:first-child {
  font-weight: 600 !important;
  color: #0b57d0 !important; 
}

/* RESET ANT DESIGN CONFLICTS */
html.theme-google .ant-menu-item::after { 
  display: none !important; 
}

/* Sidebar Toggle / Triggers */
html.theme-google .trigger {
  color: #444746 !important;
}

/* ==============================================
   Shape System
   ============================================== */

/* Buttons: Fully rounded pills */
html.theme-google .ant-btn {
  border-radius: 999px !important;
  text-transform: none;
  font-weight: 500;
  letter-spacing: 0.02em;
  box-shadow: none !important; /* Flat design */
}
html.theme-google .ant-btn-primary {
  background-color: #0b57d0; /* Google Blue */
}

/* Inputs: Distinct chunky field */
html.theme-google .ant-input,
html.theme-google .ant-input-affix-wrapper,
html.theme-google .ant-select-selector,
html.theme-google .ant-picker {
  border-radius: 4px 4px 0 0 !important; /* Simulate filled input shape */
  background-color: #e7ebf0 !important; /* Filled style */
  border: none !important;
  border-bottom: 2px solid #72777f !important;
  box-shadow: none !important;
}
html.theme-google .ant-input:focus,
html.theme-google .ant-input-affix-wrapper:focus-within,
html.theme-google .ant-select-selector:focus {
  background-color: #e7ebf0 !important;
  border-bottom-color: #0b57d0 !important;
}

/* Cards: Floating Elevated Surfaces */
html.theme-google .ant-card {
  border-radius: 12px !important;
  border: none !important;
  background-color: var(--m3-surface) !important;
  box-shadow: 0 2px 6px 2px rgba(0, 0, 0, 0.05), 0 1px 2px 0 rgba(0, 0, 0, 0.1) !important;
  margin-bottom: 16px; /* Spacing */
}

/* Modal & Drawer */
html.theme-google .ant-drawer-content,
html.theme-google .ant-modal-content {
  border-radius: 28px !important; /* Super rounded M3 dialogs */
  background-color: var(--m3-surface) !important;
}
